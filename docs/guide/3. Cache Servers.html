<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>3 Cache Servers 1.0.0.BUILD-SNAPSHOT</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/1.%20Introduction%20To%20The%20GemFire%20Plugin.html"><strong>1</strong><span>Introduction To The GemFire Plugin</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/2.%20Cache%20Regions.html"><strong>2</strong><span>Cache Regions</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/3.%20Cache%20Servers.html"><strong>3</strong><span>Cache Servers</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>\
The Gemfire plugin for Grails provides integration with the GemFire in-memory distributed
data management platform.
</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/2.%20Cache%20Regions.html">&lt;&lt; <strong>2</strong><span>Cache Regions</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                


                <div class="project">
                    <h1>3 Cache Servers - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Jeff Brown, Graeme Rocher</p>

                    <p><strong>Version:</strong> 1.0.0.BUILD-SNAPSHOT</p>

                    
                </div>

                
                <div id="table-of-content">
                    <h2>Table of Contents</h2>
                    
                    <div class="toc-item" style="margin-left:0px"><a href="#3.1%20Cache%20Server%20Clients"><strong>3.1</strong><span>Cache Server Clients</span></a>
                    </div>
                    
                </div>
                

                

<h1 id="3. Cache Servers">3 Cache Servers</h1>
Gemfire supports a client / server mode for caching which can unlock some of the nicer Gemfire features including:
<ul class="star">
<li>Grid computing</li>
<li>Continuous querying</li>
<li>Advanced data partitioning</li>
</ul><p class="paragraph"/>In order to use client/server mode you need to <a href="../guide/single.html#1.1%20Installing%20Gemfire" class="guide">install gemfire</a> as per the documentation.<p class="paragraph"/>This plugin provides scripts to start up cache servers and locators.<p class="paragraph"/>To startup cache servers you can use the <code>start-cache-server</code> command.<p class="paragraph"/><div class="code"><pre>grails start&#45;cache&#45;server server1</pre></div><p class="paragraph"/>You can stop a server again using the <code>stop-cache-server</code> command:<p class="paragraph"/><div class="code"><pre>grails stop&#45;cache&#45;server server1</pre></div><p class="paragraph"/>The port of the server is automatically assigned. If you want to specify the port, locator server or multicast options there are more advanced arguments:<p class="paragraph"/><div class="code"><pre>grails start&#45;cache&#45;server server1 &#45;&#45;locators=localhost&#91;4111&#93; &#45;&#45;port=41112 &#45;&#45;mcast&#45;port=0</pre></div><p class="paragraph"/>If the multicast port (mcast-port) option is set to 0 then multicast is disabled. If you disable multicast then you will need to setup a locator server.<p class="paragraph"/>You can setup a locator by running the <code>start-locator</code> command:<p class="paragraph"/><div class="code"><pre>grails start&#45;locator</pre></div><p class="paragraph"/>This will start the locator on port 55221 by default. If you wish to start the locator service on a different port you can use:<p class="paragraph"/><div class="code"><pre>grails start&#45;locator &#45;&#45;port=4111</pre></div><p class="paragraph"/>A locator is responsible for looking up the location of cache servers. If you don't use a locator then the default multicast lookup will happen.<p class="paragraph"/>


<h2 id="3.1 Cache Server Clients">3.1 Cache Server Clients</h2>
Once you have some cache servers up and running you need to configure the Grails application to act as a client to the servers.<p class="paragraph"/><div class="code"><pre>// grails&#45;app/conf/Config.groovy
grails.gemfire.servers = &#123;    
	myServer &#123;
		properties = &#91;'log&#45;level': 'warning'&#93;
		pool &#123;
			addServer <span class="java&#45;quote">"localhost"</span>, 4111
			setMinConnections 1
			setMaxConnections 20
			setRetryAttempts 10
			setSubscriptionEnabled <span class="java&#45;keyword">true</span>
		&#125;
	&#125;
&#125;</pre></div><p class="paragraph"/>The example above using a single cache server. If you plan to use multiple cache servers then you can specify one or many locators.<p class="paragraph"/><div class="code"><pre>// grails&#45;app/conf/Config.groovy
grails.gemfire.servers = &#123;    
	myServer &#123;
		properties = &#91;'log&#45;level': 'warning'&#93;
		pool &#123;
			addLocator <span class="java&#45;quote">"localhost"</span>, 4111
			setMinConnections 1
			setMaxConnections 20
			setRetryAttempts 10
			setSubscriptionEnabled <span class="java&#45;keyword">true</span>
		&#125;
	&#125;
&#125;</pre></div><p class="paragraph"/>If you want to use continuous queries make sure that <code>subscriptionEnabled</code> is set to true on the pool. For all the configuration options see the <a href="http://www.gemstone.com/docs/6.5.0/product/docs/japi/com/gemstone/gemfire/cache/client/class-use/PoolFactory.html" target="blank">PoolFactory</a> API in the Gemfire documentation


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/2.%20Cache%20Regions.html">&lt;&lt; <strong>2</strong><span>Cache Regions</span></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Command Line</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/gemfire-generate.html">gemfire-generate</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/start-cache-server.html">start-cache-server</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/start-locator.html">start-locator</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/stop-cache-server.html">stop-cache-server</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Command%20Line/stop-locator.html">stop-locator</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
