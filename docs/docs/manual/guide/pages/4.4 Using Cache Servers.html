<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>4.4 Using Cache Servers</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    A described in the section on <a href="../guide/single.html#3. Cache Servers" class="guide">cache servers</a>, you can setup Gemfire in client / server mode, however to do so with GORM entities the server needs to know about the regions and also needs to have all the necessary classes on the classpath.<p class="paragraph"/>The Gemfire plugin for Grails will handle both of these cases for you. First to setup an appropriate server configuration you should run in the <code>gemfire-generate</code> command:<p class="paragraph"/><div class="code"><pre>$ grails gemfire&#45;generate</pre></div><p class="paragraph"/>This will create a <code>target/cache.xml</code> file with regions that match the GORM entities you have created.<p class="paragraph"/>With this done you can start a cache server with the <code>start-cache-server</code> command:<p class="paragraph"/><div class="code"><pre>$ grails start&#45;cache&#45;server server1 &#45;&#45;port=4111</pre></div><p class="paragraph"/>The <code>start-cache-server</code> command will check for the existence of a <code>grails-app/conf/cache.xml</code> or the generated <code>target/cache.xml</code> file. This allows you to make customizations to the generated file if necessary.<p class="paragraph"/>The <code>start-cache-server</code> command will also make sure that the classes in your Grails application are visible on the cache server. Once you have the cache server up and running you need to configure your Grails application to use the server by adding the following to <code>grails-app/conf/Config.groovy</code>:<p class="paragraph"/><div class="code"><pre>// grails&#45;app/conf/Config.groovy
grails.gemfire.servers = &#123;    
	myServer &#123;
		properties = &#91;'log&#45;level': 'warning'&#93;
		pool &#123;
			addServer <span class="java&#45;quote">"localhost"</span>, 4111
			setMinConnections 1
			setMaxConnections 20
			setRetryAttempts 10
			setSubscriptionEnabled <span class="java&#45;keyword">true</span>
		&#125;
	&#125;
&#125;</pre></div>
    </body>
</html>
