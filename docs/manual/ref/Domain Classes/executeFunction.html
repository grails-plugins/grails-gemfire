<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>GemFire Plugin 1.0.0.M1 - Reference Documentation</title>
        <link rel="stylesheet" href="../../css/ref.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    <h1>executeFunction</h1><p class="paragraph"/><h2>Purpose</h2><p class="paragraph"/>Allows the execution of a function that is serialized to the node where the data exists and executed.<p class="paragraph"/><h2>Examples</h2><p class="paragraph"/>Without a filter:<p class="paragraph"/><div class="code"><pre>def results = Plant.executeFunction &#123; ctx &#45;&#62;
  ctx.lastResult ctx.localData&#91;p.id&#93;
&#125;</pre></div><p class="paragraph"/>With a filter:<p class="paragraph"/><div class="code"><pre>def results = Plant.executeFunction(&#91;1L&#93;) &#123; ctx &#45;&#62;
  ctx.lastResult ctx.localData&#91;ctx.filter.iterator().next()&#93;
&#125;</pre></div><p class="paragraph"/>
<h2>Description</h2><p class="paragraph"/>The <code>executeFunction</code> method takes an optional filter and a closure to execute. The filter should be a list of domain class identifiers that the function should be executed on.<p class="paragraph"/>The <code>ctx</code> object passed to the function allows access to the local data stored on the node where the closure is being executing using the <code>localData</code> property of the <code>ctx</code>.<p class="paragraph"/>All the properties from the <a href="http://www.gemstone.com/docs/current/product/docs/japi/com/gemstone/gemfire/cache/execute/RegionFunctionContext.html" target="blank">RegionFunctionContext</a> class are also available to the executing closure via the <code>ctx</code> object.<p class="paragraph"/><blockquote class="warning">
Node that the closure itself is serialized across the grid to the place of execution, this means that any local variables captured by the closure <strong class="bold">must</strong> also implement <code>Serializable</code>.
</blockquote><p class="paragraph"/>The <code>ctx</code> object also allows you to call the <a href="http://www.gemstone.com/docs/current/product/docs/japi/com/gemstone/gemfire/cache/execute/ResultSender.html" target="blank">ResultSender</a> instance to send results back to the caller:<p class="paragraph"/><div class="code"><pre>def results = Plant.executeFunction &#123;
	ctx.sendResult 1
	ctx.lastResult 2
&#125;</pre></div><p class="paragraph"/>Note that you can call the <code>sendResult</code> multiple times, but you must end with calling the <code>lastResult</code> method.<p class="paragraph"/>Refer to the Gemfire documentation on <a href="http://www.gemstone.com/docs/6.5.0/product/docs/html/Manuals/DevelopersGuide/wwhelp/wwhimpl/common/html/wwhelp.htm#context=DevelopersGuide&#38;file=function_execution.17.1.html%231418150" target="blank">Function Execution</a> for more information.<p class="paragraph"/>
    </body>
</html>
